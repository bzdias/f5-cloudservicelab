{
	"info": {
		"_postman_id": "dbf5e660-5552-48f9-9468-21e7bdcc0ab0",
		"name": "F5 Cloud Services LAB",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Core Requests",
			"item": [
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "dcf2571e-ae02-4f0b-bdaa-34ec7d8e0d00",
								"exec": [
									"pm.test(\"Set token variable\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"ACCESS_TOKEN\", jsonData.access_token);",
									"    pm.environment.set(\"LIMITED_ACCESS_TOKEN\", jsonData.access_token);",
									"})",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"username\": \"{{USER_EMAIL}}\", \"password\": \"{{USER_PASSWORD}}\" }"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-auth/login",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Set User Info (optional)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5eb8c10c-1603-4e4e-b69d-57fb07d20a95",
								"exec": [
									"pm.test(\"Set account_id variable\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"ACCOUNT_ID\", jsonData.id);",
									"})",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"name\": \"Demo Account\",\n\t\"address\": {\n\t\t\"street_1\": \"801 5th Ave\",\n\t\t\"city\": \"Seattle\",\n\t\t\"state\": \"WA\",\n\t\t\"postal_code\": \"98104\",\n    \t\"country\": \"US\"\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-account/accounts",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-account",
								"accounts"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Current User",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "1f3b7ed6-8920-45d9-b656-4b218a65a0df",
								"exec": [
									"pm.test(\"Set account_id and user_id variables\", function () {",
									"    var jsonData = pm.response.json();",
									"    if(!pm.environment.get(\"ACCOUNT_ID\")) {",
									"        pm.environment.set(\"ACCOUNT_ID\", jsonData.primary_account_id);",
									"    }",
									"    pm.environment.set(\"USER_ID\", jsonData.id);",
									"})",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-account/user",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-account",
								"user"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Roles",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b07a23b8-15ed-4f8d-a46b-f1c2156cf74b",
								"exec": [
									"pm.test(\"Set Roles Environemnt\", function() {",
									"    var jsonData = pm.response.json();",
									"    for(var i=0; i<jsonData.roles.length; i++) {",
									"        if (jsonData.roles[i].name === \"limited-user\") {",
									"            pm.environment.set(\"LIMITED_USER_ROLE_ID\", jsonData.roles[i].id);",
									"        }",
									"    }",
									"})"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ACCESS_TOKEN}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-account/roles",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-account",
								"roles"
							]
						}
					},
					"response": []
				},
				{
					"name": "Invite Limited User (optional)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0e4b047e-8156-4cd4-abf0-96316338c55f",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"inviter_account_id\": \"{{ACCOUNT_ID}}\",\n\t\"inviter_user_id\": \"{{USER_ID}}\",\n\t\"account_ids\": [\n\t\t\"{{ACCOUNT_ID}}\"\n\t],\n\t\"invitees\": [\n\t\t{\n\t\t\t\"first_name\": \"limited\",\n\t\t\t\"last_name\": \"user\",\n\t\t\t\"email\": \"{{LIMITED_USER_EMAIL}}\"\n\t\t}\n\t],\n\t\"role_id\": \"{{LIMITED_USER_ROLE_ID}}\"\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-account/invites",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-account",
								"invites"
							]
						}
					},
					"response": []
				},
				{
					"name": "Limited User Login (optional)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "adb04ab3-dc11-438b-9888-751f60a3554a",
								"exec": [
									"pm.test(\"Set token variable\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"LIMITED_ACCESS_TOKEN\", jsonData.access_token);",
									"})",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"username\": \"{{LIMITED_USER_EMAIL}}\", \"password\": \"{{LIMITED_USER_PASSWORD}}\" }\""
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-auth/login",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-auth",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get DNS Zone (lab)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "391bff3a-9fa2-4bf5-9c79-63ad6433cf09",
								"exec": [
									"pm.test(\"Get User's DNS Zone Name\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"ZONE_NAME\", jsonData.zone);",
									"})",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{LIMITED_ACCESS_TOKEN}}"
							}
						],
						"url": {
							"raw": "http://{{DNS_WEB_ADMIN}}/zone",
							"protocol": "http",
							"host": [
								"{{DNS_WEB_ADMIN}}"
							],
							"path": [
								"zone"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get User Membership",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c24cf5b1-f4e7-4393-b5fb-528308e05193",
								"exec": [
									"pm.test(\"Switch account\", function() {",
									"    var jsonData = pm.response.json();",
									"    for(var i=0; i<jsonData.memberships.length; i++) {",
									"        if (jsonData.memberships[i].account_name === \"{{ACCOUNT_NAME}}\") {",
									"            pm.environment.set(\"ACCOUNT_ID\", jsonData.memberships[i].account_id);",
									"        }",
									"    }",
									"})"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-account/users/{{USER_ID}}/memberships",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-account",
								"users",
								"{{USER_ID}}",
								"memberships"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Catalogs",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a3d84781-65a0-4f59-8c01-5b728470840e",
								"exec": [
									"pm.test(\"Set Catalog variables\", function() {",
									"    var jsonData = pm.response.json();",
									"    for(var i=0; i<jsonData.Catalogs.length; i++) {",
									"        if (jsonData.Catalogs[i].service_type === \"waf\") {",
									"            pm.environment.set(\"WAF_CATALOG_ID\", jsonData.Catalogs[i].catalog_id);",
									"        }",
									"        ",
									"        if (jsonData.Catalogs[i].service_type === \"adns\") {",
									"            pm.environment.set(\"DNS_CATALOG_ID\", jsonData.Catalogs[i].catalog_id);",
									"        }",
									"        ",
									"        if (jsonData.Catalogs[i].service_type === \"gslb\") {",
									"            pm.environment.set(\"GSLB_CATALOG_ID\", jsonData.Catalogs[i].catalog_id);",
									"        }",
									"    }",
									"})"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-catalog/catalogs",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-catalog",
								"catalogs"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscribe to Catalog",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"account_id\": \"{{ACCOUNT_ID}}\",\n    \"catalog_id\": \"<<replace with desired catalog_id>>\"\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-account/accounts/{{ACCOUNT_ID}}/catalogs",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-account",
								"accounts",
								"{{ACCOUNT_ID}}",
								"catalogs"
							]
						},
						"description": "Hardcoded catalog ID"
					},
					"response": []
				},
				{
					"name": "Retrieve Previously Created Subscriptions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "dc8031df-5829-40f6-970c-53a5ed686d3c",
								"exec": [
									"pm.test(\"Find previously created subscriptions\", function() {",
									"    const jsonData = pm.response.json();",
									"    for(var i=0; i < jsonData.subscriptions.length; i++) {",
									"        const subscription = jsonData.subscriptions[i];",
									"        const zoneName = pm.environment.get(\"ZONE_NAME\");",
									"        if (subscription.service_type === \"adns\" && subscription.service_instance_name === zoneName) {",
									"            pm.environment.set(\"DNS_SUBSCRIPTION_ID\", subscription.subscription_id);",
									"        }",
									"        if (subscription.service_type === \"gslb\" && subscription.service_instance_name === zoneName) {",
									"            pm.environment.set(\"GSLB_SUBSCRIPTION_ID\", subscription.subscription_id);",
									"        }",
									"        if (subscription.service_type === \"waf\" && subscription.service_instance_name === (\"na2-auction.\" + zoneName)) {",
									"            pm.environment.set(\"WAF_SUBSCRIPTION_ID\", subscription.subscription_id);",
									"            pm.environment.set(\"WAF_CNAME\", subscription.configuration.details.CNAMEValue);",
									"        }",
									"    }",
									"})"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions?account_id={{ACCOUNT_ID}}",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions"
							],
							"query": [
								{
									"key": "account_id",
									"value": "{{ACCOUNT_ID}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "DNS",
			"item": [
				{
					"name": "List DNS Subscriptions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9c478c81-cb35-4bcd-832b-3fcca5f95cef",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions?account_id={{ACCOUNT_ID}}&catalog_id={{DNS_CATALOG_ID}}&service_type=adns",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions"
							],
							"query": [
								{
									"key": "account_id",
									"value": "{{ACCOUNT_ID}}"
								},
								{
									"key": "catalog_id",
									"value": "{{DNS_CATALOG_ID}}"
								},
								{
									"key": "service_type",
									"value": "adns"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create DNS Subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e3d41c6c-dd43-4fb8-b804-93bd38451bdb",
								"exec": [
									"pm.test(\"Set DNS subscription id variable\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"DNS_SUBSCRIPTION_ID\", jsonData.subscription_id);",
									"})",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{ACCESS_TOKEN}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"account_id\": \"{{ACCOUNT_ID}}\",\n  \"catalog_id\": \"{{DNS_CATALOG_ID}}\",\n  \"service_instance_name\": \"{{ZONE_NAME}}\",\n  \"configuration\": {\n    \"adns_service\": {\n      \"zone\": \"{{ZONE_NAME}}\",\n      \"master_servers\": [\n        \"54.211.12.173\"\n      ]\n    }\n  },\n  \"service_type\": \"adns\"\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Activate DNS Subscription",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"subscription_id\": \"{{DNS_SUBSCRIPTION_ID}}\",\n  \"omit_config\": true\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions/{{DNS_SUBSCRIPTION_ID}}/activate",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions",
								"{{DNS_SUBSCRIPTION_ID}}",
								"activate"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get DNS Subscription Zones",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e63466dc-7102-4408-9201-0550d900e3ad",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions/{{DNS_SUBSCRIPTION_ID}}/test",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions",
								"{{DNS_SUBSCRIPTION_ID}}",
								"test"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "DNS Load Balancer",
			"item": [
				{
					"name": "Create GSLB Subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "1f913062-1335-4dd7-821d-bb31d59d519b",
								"exec": [
									"pm.test(\"Set GSLB subscription id variable\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"GSLB_SUBSCRIPTION_ID\", jsonData.subscription_id);",
									"})",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"account_id\": \"{{ACCOUNT_ID}}\",\n  \"catalog_id\": \"{{GSLB_CATALOG_ID}}\",\n  \"service_instance_name\": \"{{ZONE_NAME}}\",\n  \"configuration\": {\n    \"gslb_service\": {\n      \"zone\": \"{{ZONE_NAME}}\",\n      \"load_balanced_records\": {\n        \"lbrs_auction\": {\n          \"aliases\": [\n            \"auction\"\n          ],\n          \"display_name\": \"auction.{{ZONE_NAME}}\",\n          \"enable\": true,\n          \"persistence\": false,\n          \"proximity_rules\": [\n            {\n              \"pool\": \"pools_usa\",\n              \"region\": \"regions_usa\",\n              \"score\": 1\n            }\n          ],\n          \"rr_type\": \"A\"\n        }\n      },\n      \"pools\": {\n        \"pools_usa\": {\n          \"display_name\": \"usa\",\n          \"enable\": true,\n          \"load_balancing_mode\": \"round-robin\",\n          \"max_answers\": 1,\n          \"members\": [\n            {\n              \"final\": null,\n              \"monitor\": \"basic\",\n              \"virtual_server\": \"ipEndpoint_na1_auction\"\n            }\n          ],\n          \"remark\": \"\",\n          \"rr_type\": \"A\",\n          \"ttl\": 30\n        }\n      },\n      \"regions\": {\n        \"regions_usa\": {\n          \"display_name\": \"usa\",\n          \"sectors\": [\n            {\n              \"code\": \"NA\",\n              \"scale\": \"continent\"\n            }\n          ]\n        }\n      },\n      \"virtual_servers\": {\n        \"ipEndpoint_na1_auction\": {\n          \"address\": \"34.229.48.248\",\n          \"display_name\": \"na1-auction\",\n          \"monitor\": \"none\",\n          \"port\": 80\n        }\n      }\n    }\n  },\n  \"service_type\": \"gslb\"\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Activate GSLB Subscription",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"subscription_id\": \"{{GSLB_SUBSCRIPTION_ID}}\",\n  \"omit_config\": true\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions/{{GSLB_SUBSCRIPTION_ID}}/activate",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions",
								"{{GSLB_SUBSCRIPTION_ID}}",
								"activate"
							]
						}
					},
					"response": []
				},
				{
					"name": "Test NA Availability (lab)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{LIMITED_ACCESS_TOKEN}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"domain\": \"auction.{{ZONE_NAME}}\"\n}"
						},
						"url": {
							"raw": "http://{{DNS_WEB_ADMIN}}/proxy/northamerica",
							"protocol": "http",
							"host": [
								"{{DNS_WEB_ADMIN}}"
							],
							"path": [
								"proxy",
								"northamerica"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Endpoints & Pool Members",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"subscription_id\": \"{{GSLB_SUBSCRIPTION_ID}}\",\n  \"account_id\": \"{{ACCOUNT_ID}}\",\n  \"catalog_id\": \"{{GSLB_CATALOG_ID}}\",\n  \"service_instance_name\": \"{{ZONE_NAME}}\",\n  \"configuration\": {\n    \"gslb_service\": {\n      \"zone\": \"{{ZONE_NAME}}\",\n      \"load_balanced_records\": {\n        \"lbrs_auction\": {\n          \"aliases\": [\n            \"auction\"\n          ],\n          \"display_name\": \"auction.{{ZONE_NAME}}\",\n          \"enable\": true,\n          \"persistence\": false,\n          \"proximity_rules\": [\n            {\n              \"pool\": \"pools_usa\",\n              \"region\": \"global\",\n              \"score\": 1\n            },\n            {\n              \"pool\": \"pools_europe\",\n              \"region\": \"global\",\n              \"score\": 1\n            },\n            {\n              \"pool\": \"pools_australia\",\n              \"region\": \"global\",\n              \"score\": 1\n            }\n          ],\n          \"rr_type\": \"A\"\n        }\n      },\n      \"pools\": {\n        \"pools_usa\": {\n          \"display_name\": \"usa\",\n          \"enable\": true,\n          \"load_balancing_mode\": \"round-robin\",\n          \"max_answers\": 1,\n          \"members\": [\n            {\n              \"final\": null,\n              \"monitor\": \"basic\",\n              \"virtual_server\": \"ipEndpoint_na1_auction\"\n            },\n            {\n              \"final\": null,\n              \"monitor\": \"basic\",\n              \"virtual_server\": \"ipEndpoint_na2_auction\"\n            },\n            {\n              \"final\": null,\n              \"monitor\": \"basic\",\n              \"virtual_server\": \"ipEndpoint_na3_auction\"\n            }\n          ],\n          \"remark\": \"\",\n          \"rr_type\": \"A\",\n          \"ttl\": 30\n        },\n        \"pools_europe\": {\n          \"display_name\": \"europe\",\n          \"enable\": true,\n          \"load_balancing_mode\": \"round-robin\",\n          \"max_answers\": 1,\n          \"members\": [\n            {\n              \"final\": null,\n              \"monitor\": \"basic\",\n              \"virtual_server\": \"ipEndpoint_eu_auction\"\n            }\n          ],\n          \"remark\": \"\",\n          \"rr_type\": \"A\",\n          \"ttl\": 30\n        },\n        \"pools_australia\": {\n          \"display_name\": \"australia\",\n          \"enable\": true,\n          \"load_balancing_mode\": \"round-robin\",\n          \"max_answers\": 1,\n          \"members\": [\n            {\n              \"final\": null,\n              \"monitor\": \"basic\",\n              \"virtual_server\": \"ipEndpoint_au_auction\"\n            }\n          ],\n          \"remark\": \"\",\n          \"rr_type\": \"A\",\n          \"ttl\": 30\n        }\n      },\n      \"virtual_servers\": {\n        \"ipEndpoint_na1_auction\": {\n          \"address\": \"34.229.48.248\",\n          \"display_name\": \"na1-auction\",\n          \"monitor\": \"none\",\n          \"port\": 80\n        },\n        \"ipEndpoint_eu_auction\": {\n          \"address\": \"3.122.191.227\",\n          \"display_name\": \"eu-auction\",\n          \"monitor\": \"none\",\n          \"port\": 80\n        },\n        \"ipEndpoint_na2_auction\": {\n          \"address\": \"18.232.64.254\",\n          \"display_name\": \"na2-auction\",\n          \"monitor\": \"none\",\n          \"port\": 80\n        },\n        \"ipEndpoint_na3_auction\": {\n          \"address\": \"13.82.106.211\",\n          \"display_name\": \"na3-auction\",\n          \"monitor\": \"none\",\n          \"port\": 80\n        },\n        \"ipEndpoint_au_auction\": {\n          \"address\": \"54.206.13.195\",\n          \"display_name\": \"au-auction\",\n          \"monitor\": \"none\",\n          \"port\": 80\n        }\n      }\n    }\n  }\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions/{{GSLB_SUBSCRIPTION_ID}}",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions",
								"{{GSLB_SUBSCRIPTION_ID}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Test Round Robin (lab)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{LIMITED_ACCESS_TOKEN}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"domain\": \"auction.{{ZONE_NAME}}\"\n}"
						},
						"url": {
							"raw": "http://{{DNS_WEB_ADMIN}}/proxy/northamerica",
							"protocol": "http",
							"host": [
								"{{DNS_WEB_ADMIN}}"
							],
							"path": [
								"proxy",
								"northamerica"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Proximity Rules & Regions",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"subscription_id\": \"{{GSLB_SUBSCRIPTION_ID}}\",\n  \"account_id\": \"{{ACCOUNT_ID}}\",\n  \"catalog_id\": \"{{GSLB_CATALOG_ID}}\",\n  \"service_instance_name\": \"{{ZONE_NAME}}\",\n  \"configuration\": {\n    \"gslb_service\": {\n      \"zone\": \"{{ZONE_NAME}}\",\n      \"load_balanced_records\": {\n        \"lbrs_auction\": {\n          \"aliases\": [\n            \"auction\"\n          ],\n          \"display_name\": \"auction.{{ZONE_NAME}}\",\n          \"enable\": true,\n          \"persistence\": false,\n          \"proximity_rules\": [\n            {\n              \"pool\": \"pools_usa\",\n              \"region\": \"regions_usa\",\n              \"score\": 1\n            },\n            {\n              \"pool\": \"pools_europe\",\n              \"region\": \"regions_europe\",\n              \"score\": 50\n            },\n            {\n              \"pool\": \"pools_australia\",\n              \"region\": \"regions_australia\",\n              \"score\": 50\n            }\n          ],\n          \"rr_type\": \"A\"\n        }\n      },\n      \"pools\": {\n        \"pools_usa\": {\n          \"display_name\": \"usa\",\n          \"enable\": true,\n          \"load_balancing_mode\": \"round-robin\",\n          \"max_answers\": 1,\n          \"members\": [\n            {\n              \"final\": null,\n              \"monitor\": \"basic\",\n              \"virtual_server\": \"ipEndpoint_na1_auction\"\n            },\n            {\n              \"final\": null,\n              \"monitor\": \"basic\",\n              \"virtual_server\": \"ipEndpoint_na2_auction\"\n            },\n            {\n              \"final\": null,\n              \"monitor\": \"basic\",\n              \"virtual_server\": \"ipEndpoint_na3_auction\"\n            }\n          ],\n          \"remark\": \"\",\n          \"rr_type\": \"A\",\n          \"ttl\": 30\n        },\n        \"pools_europe\": {\n          \"display_name\": \"europe\",\n          \"enable\": true,\n          \"load_balancing_mode\": \"round-robin\",\n          \"max_answers\": 1,\n          \"members\": [\n            {\n              \"final\": null,\n              \"monitor\": \"basic\",\n              \"virtual_server\": \"ipEndpoint_eu_auction\"\n            }\n          ],\n          \"remark\": \"\",\n          \"rr_type\": \"A\",\n          \"ttl\": 30\n        },\n        \"pools_australia\": {\n          \"display_name\": \"australia\",\n          \"enable\": true,\n          \"load_balancing_mode\": \"round-robin\",\n          \"max_answers\": 1,\n          \"members\": [\n            {\n              \"final\": null,\n              \"monitor\": \"basic\",\n              \"virtual_server\": \"ipEndpoint_au_auction\"\n            }\n          ],\n          \"remark\": \"\",\n          \"rr_type\": \"A\",\n          \"ttl\": 30\n        }\n      },\n      \"regions\": {\n        \"regions_europe\": {\n          \"display_name\": \"europe\",\n          \"sectors\": [\n            {\n              \"code\": \"EU\",\n              \"scale\": \"continent\"\n            }\n          ]\n        },\n        \"regions_usa\": {\n          \"display_name\": \"usa\",\n          \"sectors\": [\n            {\n              \"code\": \"NA\",\n              \"scale\": \"continent\"\n            }\n          ]\n        },\n        \"regions_australia\": {\n          \"display_name\": \"australia\",\n          \"sectors\": [\n            {\n              \"code\": \"AU\",\n              \"scale\": \"continent\"\n            }\n          ]\n        }\n      },\n      \"virtual_servers\": {\n         \"ipEndpoint_na1_auction\": {\n          \"address\": \"34.229.48.248\",\n          \"display_name\": \"na1-auction\",\n          \"monitor\": \"none\",\n          \"port\": 80\n        },\n        \"ipEndpoint_eu_auction\": {\n          \"address\": \"3.122.191.227\",\n          \"display_name\": \"eu-auction\",\n          \"monitor\": \"none\",\n          \"port\": 80\n        },\n        \"ipEndpoint_na2_auction\": {\n          \"address\": \"18.232.64.254\",\n          \"display_name\": \"na2-auction\",\n          \"monitor\": \"none\",\n          \"port\": 80\n        },\n        \"ipEndpoint_na3_auction\": {\n          \"address\": \"13.82.106.211\",\n          \"display_name\": \"na3-auction\",\n          \"monitor\": \"none\",\n          \"port\": 80\n        },\n        \"ipEndpoint_au_auction\": {\n          \"address\": \"54.206.13.195\",\n          \"display_name\": \"au-auction\",\n          \"monitor\": \"none\",\n          \"port\": 80\n        }\n      },\n      \"regions\": {\n        \"regions_europe\": {\n          \"display_name\": \"europe\",\n          \"sectors\": [\n            {\n              \"code\": \"EU\",\n              \"scale\": \"continent\"\n            }\n          ]\n        },\n        \"regions_australia\": {\n          \"display_name\": \"australia\",\n          \"sectors\": [\n            {\n              \"scale\": \"continent\",\n              \"code\": \"OC\"\n            }\n          ]\n        },\n        \"regions_usa\": {\n          \"display_name\": \"usa\",\n          \"sectors\": [\n            {\n              \"code\": \"NA\",\n              \"scale\": \"continent\"\n            }\n          ]\n        }\n      }\n    }\n  },\n  \"service_type\": \"gslb\"\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions/{{GSLB_SUBSCRIPTION_ID}}",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions",
								"{{GSLB_SUBSCRIPTION_ID}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Test Proximity Rules (lab)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{LIMITED_ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"domain\": \"auction.{{ZONE_NAME}}\"\n}"
						},
						"url": {
							"raw": "http://{{DNS_WEB_ADMIN}}/proxy/europe",
							"protocol": "http",
							"host": [
								"{{DNS_WEB_ADMIN}}"
							],
							"path": [
								"proxy",
								"europe"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Essential App Protect",
			"item": [
				{
					"name": "Create EAP Subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5893f8fc-193e-43f2-a1ba-60e7a21766b5",
								"exec": [
									"pm.test(\"Set EAP subscription id variable\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"WAF_SUBSCRIPTION_ID\", jsonData.subscription_id);",
									"})",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"account_id\": \"{{ACCOUNT_ID}}\",\n    \"catalog_id\": \"{{WAF_CATALOG_ID}}\",\n    \"service_instance_name\": \"na2-auction.{{ZONE_NAME}}\",\n    \"configuration\": {\n        \"waf_service\": {\n            \"application\": {\n                \"description\": \"na2-auction.{{ZONE_NAME}}\",\n                \"fqdn\": \"na2-auction.{{ZONE_NAME}}\",\n                \"http\": {\n                    \"enabled\": true,\n                    \"port\": 80\n                },\n                \"additional_domains\": [\n                    \"na2-auction.{{EAP_RECORD}}\"\n                ],\n                \"waf_regions\": {\n                    \"aws\": {\n                        \"us-east-1\": {\n                            \"endpoint\": {\n                                \"http\": {\n                                    \"port\": 80,\n                                    \"enabled\": true\n                                },\n                                \"ips\": [\n                                    \"18.232.64.254\"\n                                ]\n                            }\n                        }\n                    }\n                }\n            },\n            \"policy\": {\n                \"encoding\": \"utf-8\",\n                \"threat_campaigns\": {\n                    \"enabled\": true,\n                    \"enforcement_mode\": \"monitoring\"\n                },\n                \"compliance_enforcement\": {\n                    \"data_guard\": {\n                        \"enabled\": true,\n                        \"cc\": true,\n                        \"ssn\": true\n                    },\n                    \"sensitive_parameters\": {\n                        \"enabled\": true,\n                        \"parameters\": [\n                            \"cc_id\",\n                            \"creditcard\",\n                            \"passwd\",\n                            \"password\"\n                        ],\n                        \"xml_attributes\": [],\n                        \"xml_elements\": []\n                    }\n                },\n                \"high_risk_attack_mitigation\": {\n                    \"enabled\": true,\n                    \"enforcement_mode\": \"monitoring\",\n                    \"signature_enforcement\": {\n                        \"enabled\": true\n                    },\n                    \"allowed_methods\": {\n                        \"enabled\": true,\n                        \"methods\": [\n                            {\n                                \"name\": \"GET\"\n                            },\n                            {\n                                \"name\": \"POST\"\n                            },\n                            {\n                                \"name\": \"HEAD\"\n                            }\n                        ]\n                    },\n                    \"disallowed_file_types\": {\n                        \"enabled\": true,\n                        \"file_types\": [\n                            \"back\",\n                            \"bat\",\n                            \"bck\",\n                            \"bin\",\n                            \"cfg\",\n                            \"cmd\",\n                            \"com\",\n                            \"config\",\n                            \"dat\",\n                            \"dll\",\n                            \"eml\",\n                            \"exe\",\n                            \"exe1\",\n                            \"exe_renamed\",\n                            \"hta\",\n                            \"htr\",\n                            \"htw\",\n                            \"ida\",\n                            \"idc\",\n                            \"idq\",\n                            \"ini\",\n                            \"old\",\n                            \"sav\",\n                            \"save\"\n                        ]\n                    },\n                    \"api_compliance_enforcement\": {\n                        \"enabled\": true\n                    },\n                    \"http_compliance_enforcement\": {\n                        \"enabled\": true\n                    },\n                    \"websocket_compliance_enforcement\": {\n                        \"enabled\": true\n                    },\n                    \"geolocation_enforcement\": {\n                        \"disallowed_country_codes\": [\n                            \"CU\",\n                            \"IR\",\n                            \"KP\",\n                            \"LY\",\n                            \"SD\",\n                            \"SY\"\n                        ],\n                        \"enabled\": true\n                    },\n                    \"ip_enforcement\": {\n                        \"enabled\": true,\n                        \"ips\": []\n                    }\n                },\n                \"malicious_ip_enforcement\": {\n                    \"enabled\": true,\n                    \"enforcement_mode\": \"monitoring\",\n                    \"ip_categories\": [\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"mobile_threats\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"cloud_services\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"anonymous_proxies\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"phishing_proxies\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"infected_sources\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"denial_of_service\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"scanners\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"bot_nets\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"web_attacks\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"windows_exploits\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"spam_sources\"\n                        }\n                    ]\n                }\n            }\n        }\n    },\n    \"service_type\": \"waf\"\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Activate EAP Subscription",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"subscription_id\": \"{{WAF_SUBSCRIPTION_ID}}\",\n  \"omit_config\": true\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions/{{WAF_SUBSCRIPTION_ID}}/activate",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions",
								"{{WAF_SUBSCRIPTION_ID}}",
								"activate"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get EAP Subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0cc3ad5a-5bc4-441f-806c-b66372548aa7",
								"exec": [
									"pm.test(\"Set EAP variables\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"WAF_SERVICE_INSTANCE_ID\", jsonData.service_instance_id);",
									"    pm.environment.set(\"WAF_CNAME\", jsonData.configuration.details.CNAMEValue);",
									"})",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions/{{WAF_SUBSCRIPTION_ID}}",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions",
								"{{WAF_SUBSCRIPTION_ID}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update EAP CNAME (lab)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{LIMITED_ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"name\": \"na2-auction\",\n\t\"type\": \"CNAME\",\n\t\"value\": \"{{WAF_CNAME}}\"\n}"
						},
						"url": {
							"raw": "http://{{DNS_WEB_ADMIN}}/record",
							"protocol": "http",
							"host": [
								"{{DNS_WEB_ADMIN}}"
							],
							"path": [
								"record"
							]
						}
					},
					"response": []
				},
				{
					"name": "Start EAP Attack (lab)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{LIMITED_ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"domain\": \"na2-auction.{{ZONE_NAME}}\"\n}"
						},
						"url": {
							"raw": "http://{{DNS_WEB_ADMIN}}/attack",
							"protocol": "http",
							"host": [
								"{{DNS_WEB_ADMIN}}"
							],
							"path": [
								"attack"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get EAP Events Stream",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"subscription_id\":\"{{WAF_SUBSCRIPTION_ID}}\",\n\t\"service_instance_id\":\"{{WAF_SERVICE_INSTANCE_ID}}\"\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/waf/v1/analytics/security/events",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"waf",
								"v1",
								"analytics",
								"security",
								"events"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Monitor to Block",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "91f4afe4-6130-4945-bbe7-429ab0fc92a5",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"account_id\": \"{{ACCOUNT_ID}}\",\n    \"catalog_id\": \"{{WAF_CATALOG_ID}}\",\n    \"service_instance_name\": \"na2-auction.{{ZONE_NAME}}\",\n    \"configuration\": {\n        \"waf_service\": {\n            \"application\": {\n                \"description\": \"na2-auction.{{ZONE_NAME}}\",\n                \"fqdn\": \"na2-auction.{{ZONE_NAME}}\",\n                \"http\": {\n                    \"enabled\": true,\n                    \"port\": 80\n                },\n                \"additional_domains\": [\n                    \"na2-auction.{{EAP_RECORD}}\"\n                ],\n                \"waf_regions\": {\n                    \"aws\": {\n                        \"us-east-1\": {\n                            \"endpoint\": {\n                                \"http\": {\n                                    \"port\": 80,\n                                    \"enabled\": true\n                                },\n                                \"ips\": [\n                                    \"18.232.64.254\"\n                                ]\n                            }\n                        }\n                    }\n                }\n            },\n            \"policy\": {\n                \"encoding\": \"utf-8\",\n                \"threat_campaigns\": {\n                    \"enabled\": true,\n                    \"enforcement_mode\": \"blocking\"\n                },\n                \"compliance_enforcement\": {\n                    \"data_guard\": {\n                        \"enabled\": true,\n                        \"cc\": true,\n                        \"ssn\": true\n                    },\n                    \"sensitive_parameters\": {\n                        \"enabled\": true,\n                        \"parameters\": [\n                            \"cc_id\",\n                            \"creditcard\",\n                            \"passwd\",\n                            \"password\"\n                        ],\n                        \"xml_attributes\": [],\n                        \"xml_elements\": []\n                    }\n                },\n                \"high_risk_attack_mitigation\": {\n                    \"enabled\": true,\n                    \"enforcement_mode\": \"blocking\",\n                    \"signature_enforcement\": {\n                        \"enabled\": true\n                    },\n                    \"allowed_methods\": {\n                        \"enabled\": true,\n                        \"methods\": [\n                            {\n                                \"name\": \"GET\"\n                            },\n                            {\n                                \"name\": \"POST\"\n                            },\n                            {\n                                \"name\": \"HEAD\"\n                            }\n                        ]\n                    },\n                    \"disallowed_file_types\": {\n                        \"enabled\": true,\n                        \"file_types\": [\n                            \"back\",\n                            \"bat\",\n                            \"bck\",\n                            \"bin\",\n                            \"cfg\",\n                            \"cmd\",\n                            \"com\",\n                            \"config\",\n                            \"dat\",\n                            \"dll\",\n                            \"eml\",\n                            \"exe\",\n                            \"exe1\",\n                            \"exe_renamed\",\n                            \"hta\",\n                            \"htr\",\n                            \"htw\",\n                            \"ida\",\n                            \"idc\",\n                            \"idq\",\n                            \"ini\",\n                            \"old\",\n                            \"sav\",\n                            \"save\"\n                        ]\n                    },\n                    \"api_compliance_enforcement\": {\n                        \"enabled\": true\n                    },\n                    \"http_compliance_enforcement\": {\n                        \"enabled\": true\n                    },\n                    \"websocket_compliance_enforcement\": {\n                        \"enabled\": true\n                    },\n                    \"geolocation_enforcement\": {\n                        \"disallowed_country_codes\": [\n                            \"CU\",\n                            \"IR\",\n                            \"KP\",\n                            \"LY\",\n                            \"SD\",\n                            \"SY\"\n                        ],\n                        \"enabled\": true\n                    },\n                    \"ip_enforcement\": {\n                        \"enabled\": true,\n                        \"ips\": []\n                    }\n                },\n                \"malicious_ip_enforcement\": {\n                    \"enabled\": true,\n                    \"enforcement_mode\": \"blocking\",\n                    \"ip_categories\": [\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"mobile_threats\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"cloud_services\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"anonymous_proxies\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"phishing_proxies\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"infected_sources\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"denial_of_service\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"scanners\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"bot_nets\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"web_attacks\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"windows_exploits\"\n                        },\n                        {\n                            \"block\": true,\n                            \"log\": true,\n                            \"name\": \"spam_sources\"\n                        }\n                    ]\n                }\n            }\n        },\n        \"update_comment\": \"update monitor to block\"\n    },\n    \"service_type\": \"waf\"\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions/{{WAF_SUBSCRIPTION_ID}}",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions",
								"{{WAF_SUBSCRIPTION_ID}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Attack: SQL Injection",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "User-Agent",
								"value": "Mozilla/5.0 (Windows; U; Windows NT 5.1; pt-PT; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 (.NET CLR 3.5.30729)",
								"type": "text"
							}
						],
						"url": {
							"raw": "http://na2-auction.{{ZONE_NAME}}/vulnerabilities/sqli/?id=%25%27+or+0%3D0&Submit=Submit",
							"protocol": "http",
							"host": [
								"na2-auction",
								"{{ZONE_NAME}}"
							],
							"path": [
								"vulnerabilities",
								"sqli",
								""
							],
							"query": [
								{
									"key": "id",
									"value": "%25%27+or+0%3D0"
								},
								{
									"key": "Submit",
									"value": "Submit"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Attack: Illegal Filetype",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "User-Agent",
								"value": "Mozilla/5.0 (Windows; U; Windows NT 5.1; pt-PT; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 (.NET CLR 3.5.30729)",
								"type": "text"
							}
						],
						"url": {
							"raw": "http://na2-auction.{{ZONE_NAME}}/nginx.config",
							"protocol": "http",
							"host": [
								"na2-auction",
								"{{ZONE_NAME}}"
							],
							"path": [
								"nginx.config"
							]
						}
					},
					"response": []
				},
				{
					"name": "Attack: Threat Campaign",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "User-Agent",
								"value": "Mozilla/3.0 (compatible; Indy Library)",
								"type": "text"
							},
							{
								"key": "X-Virtual-Server-Port",
								"value": "8080",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Basic Og==",
								"type": "text"
							}
						],
						"url": {
							"raw": "http://na2-auction.{{ZONE_NAME}}/manager/html",
							"protocol": "http",
							"host": [
								"na2-auction",
								"{{ZONE_NAME}}"
							],
							"path": [
								"manager",
								"html"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Clean Up",
			"item": [
				{
					"name": "Retire DNS Subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d58cafda-07f6-4353-92d7-58bc20a6d3c2",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"subscription_id\": \"{{DNS_SUBSCRIPTION_ID}}\",\n  \"omit_config\": true\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions/{{DNS_SUBSCRIPTION_ID}}/retire",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions",
								"{{DNS_SUBSCRIPTION_ID}}",
								"retire"
							]
						}
					},
					"response": []
				},
				{
					"name": "Retire GSLB Subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5dff1f09-113b-473a-8689-40627322fd51",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"subscription_id\": \"{{GSLB_SUBSCRIPTION_ID}}\",\n  \"omit_config\": true\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions/{{GSLB_SUBSCRIPTION_ID}}/retire",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions",
								"{{GSLB_SUBSCRIPTION_ID}}",
								"retire"
							]
						}
					},
					"response": []
				},
				{
					"name": "Retire EAP Subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "bc3251ef-ff37-4dd2-9b1e-5f15ca1f110d",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{ACCESS_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"subscription_id\": \"{{WAF_SUBSCRIPTION_ID}}\",\n  \"omit_config\": true\n}"
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-subscription/subscriptions/{{WAF_SUBSCRIPTION_ID}}/retire",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-subscription",
								"subscriptions",
								"{{WAF_SUBSCRIPTION_ID}}",
								"retire"
							]
						}
					},
					"response": []
				},
				{
					"name": "Retire DNS Zone (lab)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{LIMITED_ACCESS_TOKEN}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "http://{{DNS_WEB_ADMIN}}/zone/retire",
							"protocol": "http",
							"host": [
								"{{DNS_WEB_ADMIN}}"
							],
							"path": [
								"zone",
								"retire"
							]
						}
					},
					"response": []
				},
				{
					"name": "Limited User Logout",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "75b0eac2-0d59-459a-9213-51a5cffe57e0",
								"exec": [
									"pm.test(\"Reset token variable\", function() {",
									"    pm.environment.set(\"LIMITED_ACCESS_TOKEN\", \"\");",
									"})",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"access_token\": \"{{LIMITED_ACCESS_TOKEN}}\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-auth/logout",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-auth",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "Logout",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e00c627f-f8d3-4537-bff2-640e3dc649d8",
								"exec": [
									"pm.test(\"Reset token variable\", function() {",
									"    pm.environment.set(\"ACCESS_TOKEN\", \"\");",
									"})",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"access_token\": \"{{ACCESS_TOKEN}}\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{HOSTNAME}}/{{API_VERSION}}/svc-auth/logout",
							"protocol": "https",
							"host": [
								"{{HOSTNAME}}"
							],
							"path": [
								"{{API_VERSION}}",
								"svc-auth",
								"logout"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"protocolProfileBehavior": {}
}